class s extends Error{constructor(r){super(s._prepareSuperMessage(r)),Object.defineProperty(this,"name",{value:"NonError",configurable:!0,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace(this,s)}static _prepareSuperMessage(r){try{return JSON.stringify(r)}catch{return String(r)}}}const y=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],a=Symbol(".toJSON called"),l=e=>{e[a]=!0;const r=e.toJSON();return delete e[a],r},f=({from:e,seen:r,to_:c,forceEnumerable:i,maxDepth:p,depth:u})=>{const n=c||(Array.isArray(e)?[]:{});if(r.push(e),u>=p)return n;if(typeof e.toJSON=="function"&&e[a]!==!0)return l(e);for(const[t,o]of Object.entries(e)){if(typeof Buffer=="function"&&Buffer.isBuffer(o)){n[t]="[object Buffer]";continue}if(typeof o!="function"){if(!o||typeof o!="object"){n[t]=o;continue}if(!r.includes(e[t])){u++,n[t]=f({from:e[t],seen:r.slice(),forceEnumerable:i,maxDepth:p,depth:u});continue}n[t]="[Circular]"}}for(const{property:t,enumerable:o}of y)typeof e[t]=="string"&&Object.defineProperty(n,t,{value:e[t],enumerable:i?!0:o,configurable:!0,writable:!0});return n},b=(e,r={})=>{const{maxDepth:c=Number.POSITIVE_INFINITY}=r;return typeof e=="object"&&e!==null?f({from:e,seen:[],forceEnumerable:!0,maxDepth:c,depth:0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e},S=(e,r={})=>{const{maxDepth:c=Number.POSITIVE_INFINITY}=r;if(e instanceof Error)return e;if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const i=new Error;return f({from:e,seen:[],to_:i,maxDepth:c,depth:0}),i}return new s(e)};var E={serializeError:b,deserializeError:S};export{E as s};
