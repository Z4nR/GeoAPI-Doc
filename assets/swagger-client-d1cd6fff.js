var Qt=Object.defineProperty;var Yt=(e,t,r)=>t in e?Qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var M=(e,t,r)=>(Yt(e,typeof t!="symbol"?t+"":t,r),r),tt=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var Oe=(e,t,r)=>(tt(e,t,"read from private field"),r?r.call(e):t.get(e)),rt=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},xe=(e,t,r,n)=>(tt(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);import{i as gt,r as N,A as He,H as Xt,R as Zt,P as ge,a as V,b as oe,f as wt,O as bt,m as ne,c as we,d as Pt,t as A,e as vt,g as se,h as Ie,j as _t,I as qt,v as Ot,k as er,s as F,u as K,l as ee,n as nt,o as tr,p as rr,q as G,M as Ae,w as nr,x as te,y as Y,z as sr,B as D,C as ae,D as or,E as st,F as ot,G as ce,J as ir,K as ar,L,N as cr,Q as lr,S as ur,T as it,U as fr,V as dr,W as pr,X as hr,Y as yr,Z as mr,_ as $e,$ as ue,a0 as gr,a1 as at,a2 as wr,a3 as br,a4 as Pr,a5 as vr,a6 as Or,a7 as xr,a8 as Ar,a9 as Sr,aa as Rr,ab as Tr,ac as Cr,ad as Er,ae as Mr,af as jr,ag as Ir,ah as ct}from"./@swagger-api-0e9cbf41.js";import{j as X,J as ke}from"./js-yaml-80719af7.js";import{R as Se,O as $r}from"./minim-06d1dd61.js";import{f as Je}from"./ramda-adjunct-adbc7b65.js";import{c as kr}from"./cookie-1cddf24c.js";import{t as Ur,s as Dr}from"./openapi-server-url-templating-71878336.js";import{r as Ue}from"./openapi-path-templating-bb4e540b.js";import{i as Nr}from"./ramda-2de81992.js";import{a as q,g as zr}from"./fast-json-patch-6f36fdbd.js";import{d as Fr}from"./deepmerge-b36ca0a1.js";import{s as Br}from"./neotraverse-925ac113.js";const R={add:Vr,replace:fe,remove:Hr,merge:Jr,mergeDeep:Wr,context:Kr,getIn:Xr,applyPatch:Lr,parentPathMatch:Yr,flatten:ie,fullyNormalizeArray:Zr,normalizeArray:At,isPromise:_r,forEachNew:Gr,forEachNewPrimitive:Qr,isJsonPatch:Tt,isContextPatch:tn,isPatch:be,isMutation:Ct,isAdditiveMutation:pe,isGenerator:en,isFunction:Rt,isObject:W,isError:qr};function Lr(e,t,r){if(r=r||{},t={...t,path:t.path&&lt(t.path)},t.op==="merge"){const n=Re(e,t.path);Object.assign(n,t.value),q(e,[fe(t.path,n)])}else if(t.op==="mergeDeep"){const n=Re(e,t.path),s=Fr(n,t.value);e=q(e,[fe(t.path,s)]).newDocument}else if(t.op==="add"&&t.path===""&&W(t.value)){const n=Object.keys(t.value).reduce((s,o)=>(s.push({op:"add",path:`/${lt(o)}`,value:t.value[o]}),s),[]);q(e,n)}else if(t.op==="replace"&&t.path===""){let{value:n}=t;r.allowMetaPatches&&t.meta&&pe(t)&&(Array.isArray(t.value)||W(t.value))&&(n={...n,...t.meta}),e=n}else if(q(e,[t]),r.allowMetaPatches&&t.meta&&pe(t)&&(Array.isArray(t.value)||W(t.value))){const s={...Re(e,t.path),...t.meta};q(e,[fe(t.path,s)])}return e}function lt(e){return Array.isArray(e)?e.length<1?"":`/${e.map(t=>(t+"").replace(/~/g,"~0").replace(/\//g,"~1")).join("/")}`:e}function Vr(e,t){return{op:"add",path:e,value:t}}function fe(e,t,r){return{op:"replace",path:e,value:t,meta:r}}function Hr(e){return{op:"remove",path:e}}function Jr(e,t){return{type:"mutation",op:"merge",path:e,value:t}}function Wr(e,t){return{type:"mutation",op:"mergeDeep",path:e,value:t}}function Kr(e,t){return{type:"context",path:e,value:t}}function Gr(e,t){try{return xt(e,Ne,t)}catch(r){return r}}function Qr(e,t){try{return xt(e,De,t)}catch(r){return r}}function xt(e,t,r){const n=e.filter(pe).map(a=>t(a.value,r,a.path))||[],s=ie(n);return St(s)}function De(e,t,r){return r=r||[],Array.isArray(e)?e.map((n,s)=>De(n,t,r.concat(s))):W(e)?Object.keys(e).map(n=>De(e[n],t,r.concat(n))):t(e,r[r.length-1],r)}function Ne(e,t,r){r=r||[];let n=[];if(r.length>0){const s=t(e,r[r.length-1],r);s&&(n=n.concat(s))}if(Array.isArray(e)){const s=e.map((o,a)=>Ne(o,t,r.concat(a)));s&&(n=n.concat(s))}else if(W(e)){const s=Object.keys(e).map(o=>Ne(e[o],t,r.concat(o)));s&&(n=n.concat(s))}return n=ie(n),n}function Yr(e,t){if(!Array.isArray(t))return!1;for(let r=0,n=t.length;r<n;r+=1)if(t[r]!==e[r])return!1;return!0}function Xr(e,t){return t.reduce((r,n)=>typeof n<"u"&&r?r[n]:r,e)}function Zr(e){return St(ie(At(e)))}function At(e){return Array.isArray(e)?e:[e]}function ie(e){return[].concat(...e.map(t=>Array.isArray(t)?ie(t):t))}function St(e){return e.filter(t=>typeof t<"u")}function W(e){return e&&typeof e=="object"}function _r(e){return W(e)&&Rt(e.then)}function Rt(e){return e&&typeof e=="function"}function qr(e){return e instanceof Error}function Tt(e){if(be(e)){const{op:t}=e;return t==="add"||t==="remove"||t==="replace"}return!1}function en(e){return Object.prototype.toString.call(e)==="[object GeneratorFunction]"}function Ct(e){return Tt(e)||be(e)&&e.type==="mutation"}function pe(e){return Ct(e)&&(e.op==="add"||e.op==="replace"||e.op==="merge"||e.op==="mergeDeep")}function tn(e){return be(e)&&e.type==="context"}function be(e){return e&&typeof e=="object"}function Re(e,t){try{return zr(e,t)}catch(r){return console.error(r),{}}}const{fetch:rn,Response:nn,Headers:sn,Request:on,FormData:an,File:cn,Blob:ln}=globalThis;typeof globalThis.fetch>"u"&&(globalThis.fetch=rn);typeof globalThis.Headers>"u"&&(globalThis.Headers=sn);typeof globalThis.Request>"u"&&(globalThis.Request=on);typeof globalThis.Response>"u"&&(globalThis.Response=nn);typeof globalThis.FormData>"u"&&(globalThis.FormData=an);typeof globalThis.File>"u"&&(globalThis.File=cn);typeof globalThis.Blob>"u"&&(globalThis.Blob=ln);const Et="application/json, application/yaml",he="https://swagger.io",un=Object.freeze({url:"/"}),fn=["properties"],dn=["properties"],pn=["definitions","parameters","responses","securityDefinitions","components/schemas","components/responses","components/parameters","components/securitySchemes"],hn=["schema/example","items/example"];function Mt(e){const t=e[e.length-1],r=e[e.length-2],n=e.join("/");return fn.indexOf(t)>-1&&dn.indexOf(r)===-1||pn.indexOf(n)>-1||hn.some(s=>n.indexOf(s)>-1)}function yn(e,t,{specmap:r,getBaseUrlForNodePath:n=o=>r.getContext([...t,...o]).baseDoc,targetKeys:s=["$ref","$$ref"]}={}){const o=[];return Br(e).forEach(function(){if(s.includes(this.key)&&typeof this.node=="string"){const i=this.path,c=t.concat(this.path),l=ze(this.node,n(i));o.push(r.replace(c,l))}}),o}function ze(e,t){const[r,n]=e.split("#"),s=t??"",o=r??"";let a;if(gt(s))a=N(s,o);else{const i=N(he,s),l=N(i,o).replace(he,"");a=o.startsWith("/")?l:l.substring(1)}return n?`${a}#${n}`:a}const mn=/^([a-z]+:\/\/|\/\/)/i;class Z extends He{}const B={},ut=new WeakMap,gn=[e=>e[0]==="paths"&&e[3]==="responses"&&e[5]==="examples",e=>e[0]==="paths"&&e[3]==="responses"&&e[5]==="content"&&e[7]==="example",e=>e[0]==="paths"&&e[3]==="responses"&&e[5]==="content"&&e[7]==="examples"&&e[9]==="value",e=>e[0]==="paths"&&e[3]==="requestBody"&&e[4]==="content"&&e[6]==="example",e=>e[0]==="paths"&&e[3]==="requestBody"&&e[4]==="content"&&e[6]==="examples"&&e[8]==="value",e=>e[0]==="paths"&&e[2]==="parameters"&&e[4]==="example",e=>e[0]==="paths"&&e[3]==="parameters"&&e[5]==="example",e=>e[0]==="paths"&&e[2]==="parameters"&&e[4]==="examples"&&e[6]==="value",e=>e[0]==="paths"&&e[3]==="parameters"&&e[5]==="examples"&&e[7]==="value",e=>e[0]==="paths"&&e[2]==="parameters"&&e[4]==="content"&&e[6]==="example",e=>e[0]==="paths"&&e[2]==="parameters"&&e[4]==="content"&&e[6]==="examples"&&e[8]==="value",e=>e[0]==="paths"&&e[3]==="parameters"&&e[4]==="content"&&e[7]==="example",e=>e[0]==="paths"&&e[3]==="parameters"&&e[5]==="content"&&e[7]==="examples"&&e[9]==="value"],wn=e=>gn.some(t=>t(e)),bn={key:"$ref",plugin:(e,t,r,n)=>{const s=n.getInstance(),o=r.slice(0,-1);if(Mt(o)||wn(o))return;const{baseDoc:a}=n.getContext(r);if(typeof e!="string")return new Z("$ref: must be a string (JSON-Ref)",{$ref:e,baseDoc:a,fullPath:r});const i=It(e),c=i[0],l=i[1]||"";let u;try{u=a||c?jt(c,a):null}catch(y){return Fe(y,{pointer:l,$ref:e,basePath:u,fullPath:r})}let d,f;if(An(l,u,o,n)&&!s.useCircularStructures){const y=ze(e,u);return e===y?null:R.replace(r,y)}if(u==null?(f=Ke(l),d=n.get(f),typeof d>"u"&&(d=new Z(`Could not resolve reference: ${e}`,{pointer:l,$ref:e,baseDoc:a,fullPath:r}))):(d=$t(u,l),d.__value!=null?d=d.__value:d=d.catch(y=>{throw Fe(y,{pointer:l,$ref:e,baseDoc:a,fullPath:r})})),d instanceof Error)return[R.remove(r),d];const h=ze(e,u),p=R.replace(o,d,{$$ref:h});if(u&&u!==a)return[p,R.context(o,{baseDoc:u})];try{if(!Sn(n.state,p)||s.useCircularStructures)return p}catch{return null}}},We=Object.assign(bn,{docCache:B,absoluteify:jt,clearCache:Pn,JSONRefError:Z,wrapError:Fe,getDoc:kt,split:It,extractFromDoc:$t,fetchJSON:vn,extract:Be,jsonPointerToArray:Ke,unescapeJsonPointerToken:Ut});function jt(e,t){if(!mn.test(e)){if(!t)throw new Z(`Tried to resolve a relative URL, without having a basePath. path: '${e}' basePath: '${t}'`);return N(t,e)}return e}function Fe(e,t){let r;return e&&e.response&&e.response.body?r=`${e.response.body.code} ${e.response.body.message}`:r=e.message,new Z(`Could not resolve reference: ${r}`,{...t,cause:e})}function It(e){return(e+"").split("#")}function $t(e,t){const r=B[e];if(r&&!R.isPromise(r))try{const n=Be(t,r);return Object.assign(Promise.resolve(n),{__value:n})}catch(n){return Promise.reject(n)}return kt(e).then(n=>Be(t,n))}function Pn(e){typeof e<"u"?delete B[e]:Object.keys(B).forEach(t=>{delete B[t]})}function kt(e){const t=B[e];return t?R.isPromise(t)?t:Promise.resolve(t):(B[e]=We.fetchJSON(e).then(r=>(B[e]=r,r)),B[e])}function vn(e){return fetch(e,{headers:{Accept:Et},loadSpec:!0}).then(t=>t.text()).then(t=>X.load(t))}function Be(e,t){const r=Ke(e);if(r.length<1)return t;const n=R.getIn(t,r);if(typeof n>"u")throw new Z(`Could not resolve pointer: ${e} does not exist in document`,{pointer:e});return n}function Ke(e){if(typeof e!="string")throw new TypeError(`Expected a string, got a ${typeof e}`);return e[0]==="/"&&(e=e.substr(1)),e===""?[]:e.split("/").map(Ut)}function Ut(e){return typeof e!="string"?e:new URLSearchParams(`=${e.replace(/~1/g,"/").replace(/~0/g,"~")}`).get("")}function Dt(e){return new URLSearchParams([["",e.replace(/~/g,"~0").replace(/\//g,"~1")]]).toString().slice(1)}function On(e){return e.length===0?"":`/${e.map(Dt).join("/")}`}const xn=e=>!e||e==="/"||e==="#";function Te(e,t){if(xn(t))return!0;const r=e.charAt(t.length),n=t.slice(-1);return e.indexOf(t)===0&&(!r||r==="/"||r==="#")&&n!=="#"}function An(e,t,r,n){let s=ut.get(n);s||(s={},ut.set(n,s));const o=On(r),a=`${t||"<specmap-base>"}#${e}`,i=o.replace(/allOf\/\d+\/?/g,""),c=n.contextTree.get([]).baseDoc;if(t===c&&Te(i,e))return!0;let l="";if(r.some(d=>(l=`${l}/${Dt(d)}`,s[l]&&s[l].some(f=>Te(f,a)||Te(a,f)))))return!0;s[i]=(s[i]||[]).concat(a)}function Sn(e,t){const r=[e];return t.path.reduce((s,o)=>(r.push(s[o]),s[o]),e),n(t.value);function n(s){return R.isObject(s)&&(r.indexOf(s)>=0||Object.keys(s).some(o=>n(s[o])))}}const Rn={key:"allOf",plugin:(e,t,r,n,s)=>{if(s.meta&&s.meta.$$ref)return;const o=r.slice(0,-1);if(Mt(o))return;if(!Array.isArray(e)){const l=new TypeError("allOf must be an array");return l.fullPath=r,l}let a=!1,i=s.value;if(o.forEach(l=>{i&&(i=i[l])}),i={...i},Object.keys(i).length===0)return;delete i.allOf;const c=[];return c.push(n.replace(o,{})),e.forEach((l,u)=>{if(!n.isObject(l)){if(a)return null;a=!0;const h=new TypeError("Elements in allOf must be objects");return h.fullPath=r,c.push(h)}c.push(n.mergeDeep(o,l));const d=r.slice(0,-1),f=yn(l,d,{getBaseUrlForNodePath:h=>n.getContext([...r,u,...h]).baseDoc,specmap:n});c.push(...f)}),i.example&&c.push(n.remove([].concat(o,"example"))),c.push(n.mergeDeep(o,i)),i.$$ref||c.push(n.remove([].concat(o,"$$ref"))),c}},Tn={key:"parameters",plugin:(e,t,r,n)=>{if(Array.isArray(e)&&e.length){const s=Object.assign([],e),o=r.slice(0,-1),a={...R.getIn(n.spec,o)};for(let i=0;i<e.length;i+=1){const c=e[i];try{s[i].default=n.parameterMacro(a,c)}catch(l){const u=new Error(l);return u.fullPath=r,u}}return R.replace(r,s)}return R.replace(r,e)}},Cn={key:"properties",plugin:(e,t,r,n)=>{const s={...e};for(const a in e)try{s[a].default=n.modelPropertyMacro(s[a])}catch(i){const c=new Error(i);return c.fullPath=r,c}return R.replace(r,s)}};class En{constructor(t){this.root=Ce(t||{})}set(t,r){const n=this.getParent(t,!0);if(!n){ye(this.root,r,null);return}const s=t[t.length-1],{children:o}=n;if(o[s]){ye(o[s],r,n);return}o[s]=Ce(r,n)}get(t){if(t=t||[],t.length<1)return this.root.value;let r=this.root,n,s;for(let o=0;o<t.length&&(s=t[o],n=r.children,!!n[s]);o+=1)r=n[s];return r&&r.protoValue}getParent(t,r){return!t||t.length<1?null:t.length<2?this.root:t.slice(0,-1).reduce((n,s)=>{if(!n)return n;const{children:o}=n;return!o[s]&&r&&(o[s]=Ce(null,n)),o[s]},this.root)}}function Ce(e,t){return ye({children:{}},e,t)}function ye(e,t,r){return e.value=t||{},e.protoValue=r?{...r.protoValue,...e.value}:e.value,Object.keys(e.children).forEach(n=>{const s=e.children[n];e.children[n]=ye(s,s.value,e)}),e}const ft=100,Mn=3e3,dt=()=>{};class jn{static getPluginName(t){return t.pluginName}static getPatchesOfType(t,r){return t.filter(r)}constructor(t){Object.assign(this,{spec:"",debugLevel:"info",plugins:[],pluginHistory:{},errors:[],mutations:[],promisedPatches:[],state:{},patches:[],context:{},contextTree:new En,showDebug:!1,allPatches:[],pluginProp:"specMap",libMethods:Object.assign(Object.create(this),R,{getInstance:()=>this}),allowMetaPatches:!1},t),this.get=this._get.bind(this),this.getContext=this._getContext.bind(this),this.hasRun=this._hasRun.bind(this),this.wrappedPlugins=this.plugins.map(this.wrapPlugin.bind(this)).filter(R.isFunction),this.patches.push(R.add([],this.spec)),this.patches.push(R.context([],this.context)),this.updatePatches(this.patches)}debug(t,...r){this.debugLevel===t&&console.log(...r)}verbose(t,...r){this.debugLevel==="verbose"&&console.log(`[${t}]   `,...r)}wrapPlugin(t,r){const{pathDiscriminator:n}=this;let s=null,o;return t[this.pluginProp]?(s=t,o=t[this.pluginProp]):R.isFunction(t)?o=t:R.isObject(t)&&(o=a(t)),Object.assign(o.bind(s),{pluginName:t.name||r,isGenerator:R.isGenerator(o)});function a(i){const c=(l,u)=>Array.isArray(l)?l.every((d,f)=>d===u[f]):!0;return function*(u,d){const f={};for(const[p,y]of u.filter(R.isAdditiveMutation).entries())if(p<Mn)yield*h(y.value,y.path,y);else return;function*h(p,y,g){if(!R.isObject(p))i.key===y[y.length-1]&&(yield i.plugin(p,i.key,y,d));else{const P=y.length-1,w=y[P],v=y.indexOf("properties"),E=w==="properties"&&P===v,I=d.allowMetaPatches&&f[p.$$ref];for(const b of Object.keys(p)){const T=p[b],j=y.concat(b),m=R.isObject(T),C=p.$$ref;if(I||m&&(d.allowMetaPatches&&C&&(f[C]=!0),yield*h(T,j,g)),!E&&b===i.key){const O=c(n,y);(!n||O)&&(yield i.plugin(T,b,j,d,g))}}}}}}}nextPlugin(){return this.wrappedPlugins.find(t=>this.getMutationsForPlugin(t).length>0)}nextPromisedPatch(){if(this.promisedPatches.length>0)return Promise.race(this.promisedPatches.map(t=>t.value))}getPluginHistory(t){const r=this.constructor.getPluginName(t);return this.pluginHistory[r]||[]}getPluginRunCount(t){return this.getPluginHistory(t).length}getPluginHistoryTip(t){const r=this.getPluginHistory(t);return r&&r[r.length-1]||{}}getPluginMutationIndex(t){const r=this.getPluginHistoryTip(t).mutationIndex;return typeof r!="number"?-1:r}updatePluginHistory(t,r){const n=this.constructor.getPluginName(t);this.pluginHistory[n]=this.pluginHistory[n]||[],this.pluginHistory[n].push(r)}updatePatches(t){R.normalizeArray(t).forEach(r=>{if(r instanceof Error){this.errors.push(r);return}try{if(!R.isObject(r)){this.debug("updatePatches","Got a non-object patch",r);return}if(this.showDebug&&this.allPatches.push(r),R.isPromise(r.value)){this.promisedPatches.push(r),this.promisedPatchThen(r);return}if(R.isContextPatch(r)){this.setContext(r.path,r.value);return}R.isMutation(r)&&this.updateMutations(r)}catch(n){console.error(n),this.errors.push(n)}})}updateMutations(t){typeof t.value=="object"&&!Array.isArray(t.value)&&this.allowMetaPatches&&(t.value={...t.value});const r=R.applyPatch(this.state,t,{allowMetaPatches:this.allowMetaPatches});r&&(this.mutations.push(t),this.state=r)}removePromisedPatch(t){const r=this.promisedPatches.indexOf(t);if(r<0){this.debug("Tried to remove a promisedPatch that isn't there!");return}this.promisedPatches.splice(r,1)}promisedPatchThen(t){return t.value=t.value.then(r=>{const n={...t,value:r};this.removePromisedPatch(t),this.updatePatches(n)}).catch(r=>{this.removePromisedPatch(t),this.updatePatches(r)}),t.value}getMutations(t,r){return t=t||0,typeof r!="number"&&(r=this.mutations.length),this.mutations.slice(t,r)}getCurrentMutations(){return this.getMutationsForPlugin(this.getCurrentPlugin())}getMutationsForPlugin(t){const r=this.getPluginMutationIndex(t);return this.getMutations(r+1)}getCurrentPlugin(){return this.currentPlugin}getLib(){return this.libMethods}_get(t){return R.getIn(this.state,t)}_getContext(t){return this.contextTree.get(t)}setContext(t,r){return this.contextTree.set(t,r)}_hasRun(t){return this.getPluginRunCount(this.getCurrentPlugin())>(t||0)}dispatch(){const t=this,r=this.nextPlugin();if(!r){const o=this.nextPromisedPatch();if(o)return o.then(()=>this.dispatch()).catch(()=>this.dispatch());const a={spec:this.state,errors:this.errors};return this.showDebug&&(a.patches=this.allPatches),Promise.resolve(a)}if(t.pluginCount=t.pluginCount||new WeakMap,t.pluginCount.set(r,(t.pluginCount.get(r)||0)+1),t.pluginCount[r]>ft)return Promise.resolve({spec:t.state,errors:t.errors.concat(new Error(`We've reached a hard limit of ${ft} plugin runs`))});if(r!==this.currentPlugin&&this.promisedPatches.length){const o=this.promisedPatches.map(a=>a.value);return Promise.all(o.map(a=>a.then(dt,dt))).then(()=>this.dispatch())}return n();function n(){t.currentPlugin=r;const o=t.getCurrentMutations(),a=t.mutations.length-1;try{if(r.isGenerator)for(const i of r(o,t.getLib()))s(i);else{const i=r(o,t.getLib());s(i)}}catch(i){console.error(i),s([Object.assign(Object.create(i),{plugin:r})])}finally{t.updatePluginHistory(r,{mutationIndex:a})}return t.dispatch()}function s(o){o&&(o=R.fullyNormalizeArray(o),t.updatePatches(o,r))}}}function In(e){return new jn(e).dispatch()}const Q={refs:We,allOf:Rn,parameters:Tn,properties:Cn};function Nt(e,t={}){const{requestInterceptor:r,responseInterceptor:n}=t,s=e.withCredentials?"include":"same-origin";return o=>e({url:o,loadSpec:!0,requestInterceptor:r,responseInterceptor:n,headers:{Accept:Et},credentials:s}).then(a=>a.body)}function Ge(e,t){return!t&&typeof navigator<"u"&&(t=navigator),t&&t.product==="ReactNative"?!!(e&&typeof e=="object"&&typeof e.uri=="string"):typeof File<"u"&&e instanceof File||typeof Blob<"u"&&e instanceof Blob||ArrayBuffer.isView(e)?!0:e!==null&&typeof e=="object"&&typeof e.pipe=="function"}function zt(e,t){return Array.isArray(e)&&e.some(r=>Ge(r,t))}class Le extends File{constructor(t,r="",n={}){super([t],r,n),this.data=t}valueOf(){return this.data}toString(){return this.valueOf()}}const $n=e=>":/?#[]@!$&'()*+,;=".indexOf(e)>-1,kn=e=>/^[a-z0-9\-._~]+$/i.test(e);function Ft(e,t="reserved"){return[...e].map(r=>{if(kn(r)||$n(r)&&t==="unsafe")return r;const n=new TextEncoder;return Array.from(n.encode(r)).map(o=>`0${o.toString(16).toUpperCase()}`.slice(-2)).map(o=>`%${o}`).join("")}).join("")}function Qe(e){const{value:t}=e;return Array.isArray(t)?Un(e):typeof t=="object"?Dn(e):Nn(e)}function $(e,t=!1){return Array.isArray(e)||e!==null&&typeof e=="object"?e=JSON.stringify(e):(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),t&&e.length>0?Ft(e,t):e}function Un({key:e,value:t,style:r,explode:n,escape:s}){if(r==="simple")return t.map(o=>$(o,s)).join(",");if(r==="label")return`.${t.map(o=>$(o,s)).join(".")}`;if(r==="matrix")return t.map(o=>$(o,s)).reduce((o,a)=>!o||n?`${o||""};${e}=${a}`:`${o},${a}`,"");if(r==="form"){const o=n?`&${e}=`:",";return t.map(a=>$(a,s)).join(o)}if(r==="spaceDelimited"){const o=n?`${e}=`:"";return t.map(a=>$(a,s)).join(` ${o}`)}if(r==="pipeDelimited"){const o=n?`${e}=`:"";return t.map(a=>$(a,s)).join(`|${o}`)}}function Dn({key:e,value:t,style:r,explode:n,escape:s}){const o=Object.keys(t);if(r==="simple")return o.reduce((a,i)=>{const c=$(t[i],s),l=n?"=":",";return`${a?`${a},`:""}${i}${l}${c}`},"");if(r==="label")return o.reduce((a,i)=>{const c=$(t[i],s),l=n?"=":".";return`${a?`${a}.`:"."}${i}${l}${c}`},"");if(r==="matrix"&&n)return o.reduce((a,i)=>{const c=$(t[i],s);return`${a?`${a};`:";"}${i}=${c}`},"");if(r==="matrix")return o.reduce((a,i)=>{const c=$(t[i],s);return`${a?`${a},`:`;${e}=`}${i},${c}`},"");if(r==="form")return o.reduce((a,i)=>{const c=$(t[i],s);return`${a?`${a}${n?"&":","}`:""}${i}${n?"=":","}${c}`},"")}function Nn({key:e,value:t,style:r,escape:n}){if(r==="simple")return $(t,n);if(r==="label")return`.${$(t,n)}`;if(r==="matrix")return`;${e}=${$(t,n)}`;if(r==="form"||r==="deepObject")return $(t,n)}const zn={form:",",spaceDelimited:"%20",pipeDelimited:"|"},Fn={csv:",",ssv:"%20",tsv:"%09",pipes:"|"};function Bt(e,t,r=!1){const{collectionFormat:n,allowEmptyValue:s,serializationOption:o,encoding:a}=t,i=typeof t=="object"&&!Array.isArray(t)?t.value:t,c=r?u=>u.toString():u=>encodeURIComponent(u),l=c(e);if(typeof i>"u"&&s)return[[l,""]];if(Ge(i)||zt(i))return[[l,i]];if(o)return pt(e,i,r,o);if(a){if([typeof a.style,typeof a.explode,typeof a.allowReserved].some(u=>u!=="undefined")){const{style:u,explode:d,allowReserved:f}=a;return pt(e,i,r,{style:u,explode:d,allowReserved:f})}if(typeof a.contentType=="string"){if(a.contentType.startsWith("application/json")){const f=typeof i=="string"?i:JSON.stringify(i),h=c(f),p=new Le(h,"blob",{type:a.contentType});return[[l,p]]}const u=c(String(i)),d=new Le(u,"blob",{type:a.contentType});return[[l,d]]}return typeof i!="object"?[[l,c(i)]]:Array.isArray(i)&&i.every(u=>typeof u!="object")?[[l,i.map(c).join(",")]]:[[l,c(JSON.stringify(i))]]}return typeof i!="object"?[[l,c(i)]]:Array.isArray(i)?n==="multi"?[[l,i.map(c)]]:[[l,i.map(c).join(Fn[n||"csv"])]]:[[l,""]]}function pt(e,t,r,n){const s=n.style||"form",o=typeof n.explode>"u"?s==="form":n.explode,a=r?!1:n&&n.allowReserved?"unsafe":"reserved",i=l=>$(l,a),c=r?l=>l:l=>i(l);return typeof t!="object"?[[c(e),i(t)]]:Array.isArray(t)?o?[[c(e),t.map(i)]]:[[c(e),t.map(i).join(zn[s])]]:s==="deepObject"?Object.keys(t).map(l=>[c(`${e}[${l}]`),i(t[l])]):o?Object.keys(t).map(l=>[c(l),i(t[l])]):[[c(e),Object.keys(t).map(l=>[`${c(l)},${i(t[l])}`]).join(",")]]}function Bn(e){return Object.entries(e).reduce((t,[r,n])=>{for(const[s,o]of Bt(r,n,!0))if(Array.isArray(o))for(const a of o)if(ArrayBuffer.isView(a)){const i=new Blob([a]);t.append(s,i)}else t.append(s,a);else if(ArrayBuffer.isView(o)){const a=new Blob([o]);t.append(s,a)}else t.append(s,o);return t},new FormData)}const Ln=(e,{encode:t=!0}={})=>{const r=(o,a,i)=>(i==null?o.append(a,""):Array.isArray(i)?i.reduce((c,l)=>r(o,a,l),o):i instanceof Date?o.append(a,i.toISOString()):typeof i=="object"?Object.entries(i).reduce((c,[l,u])=>r(o,`${a}[${l}]`,u),o):o.append(a,i),o),n=Object.entries(e).reduce((o,[a,i])=>r(o,a,i),new URLSearchParams),s=String(n);return t?s:decodeURIComponent(s)};function ht(e){const t=Object.keys(e).reduce((r,n)=>{for(const[s,o]of Bt(n,e[n]))o instanceof Le?r[s]=o.valueOf():r[s]=o;return r},{});return Ln(t,{encode:!1})}function Ye(e={}){const{url:t="",query:r,form:n}=e,s=(...o)=>{const a=o.filter(i=>i).join("&");return a?`?${a}`:""};if(n){const o=Object.keys(n).some(i=>{const{value:c}=n[i];return Ge(c)||zt(c)}),a=e.headers["content-type"]||e.headers["Content-Type"];if(o||/multipart\/form-data/i.test(a)){const i=Bn(e.form);e.formdata=i,e.body=i}else e.body=ht(n);delete e.form}if(r){const[o,a]=t.split("?");let i="";if(a){const l=new URLSearchParams(a);Object.keys(r).forEach(d=>l.delete(d)),i=String(l)}const c=s(i,ht(r));e.url=o+c,delete e.query}return e}const Vn=(e="")=>/(json|xml|yaml|text)\b/.test(e);function Hn(e,t){return t&&(t.indexOf("application/json")===0||t.indexOf("+json")>0)?JSON.parse(e):X.load(e)}function Jn(e){return e.includes(", ")?e.split(", "):e}function Wn(e={}){return typeof e.entries!="function"?{}:Array.from(e.entries()).reduce((t,[r,n])=>(t[r]=Jn(n),t),{})}function Kn(e,t,{loadSpec:r=!1}={}){const n={ok:e.ok,url:e.url||t,status:e.status,statusText:e.statusText,headers:Wn(e.headers)},s=n.headers["content-type"],o=r||Vn(s);return(o?e.text:e.blob||e.buffer).call(e).then(i=>{if(n.text=i,n.data=i,o)try{const c=Hn(i,s);n.body=c,n.obj=c}catch(c){n.parseError=c}return n})}async function me(e,t={}){typeof e=="object"&&(t=e,e=t.url),t.headers=t.headers||{},t=Ye(t),t.headers&&Object.keys(t.headers).forEach(s=>{const o=t.headers[s];typeof o=="string"&&(t.headers[s]=o.replace(/\n+/g," "))}),t.requestInterceptor&&(t=await t.requestInterceptor(t)||t);const r=t.headers["content-type"]||t.headers["Content-Type"];/multipart\/form-data/i.test(r)&&(delete t.headers["content-type"],delete t.headers["Content-Type"]);let n;try{n=await(t.userFetch||fetch)(t.url,t),n=await Kn(n,e,t),t.responseInterceptor&&(n=await t.responseInterceptor(n)||n)}catch(s){if(!n)throw s;const o=new Error(n.statusText||`response status is ${n.status}`);throw o.status=n.status,o.statusCode=n.status,o.responseError=s,o}if(!n.ok){const s=new Error(n.statusText||`response status is ${n.status}`);throw s.status=n.status,s.statusCode=n.status,s.response=n,s}return n}function lo(e,t,r){return r=r||(n=>n),t=t||(n=>n),n=>(typeof n=="string"&&(n={url:n}),n=Ye(n),n=t(n),r(e(n)))}const Xe=e=>{var t,r;const{baseDoc:n,url:s}=e,o=(t=n??s)!==null&&t!==void 0?t:"";return typeof((r=globalThis.document)===null||r===void 0?void 0:r.baseURI)=="string"?String(new URL(o,globalThis.document.baseURI)):o},Lt=e=>{const{fetch:t,http:r}=e;return t||r||me};async function Ze(e){const{spec:t,mode:r,allowMetaPatches:n=!0,pathDiscriminator:s,modelPropertyMacro:o,parameterMacro:a,requestInterceptor:i,responseInterceptor:c,skipNormalization:l=!1,useCircularStructures:u,strategies:d}=e,f=Xe(e),h=Lt(e),p=d.find(g=>g.match(t));return y(t);async function y(g){f&&(Q.refs.docCache[f]=g),Q.refs.fetchJSON=Nt(h,{requestInterceptor:i,responseInterceptor:c});const P=[Q.refs];typeof a=="function"&&P.push(Q.parameters),typeof o=="function"&&P.push(Q.properties),r!=="strict"&&P.push(Q.allOf);const w=await In({spec:g,context:{baseDoc:f},plugins:P,allowMetaPatches:n,pathDiscriminator:s,parameterMacro:a,modelPropertyMacro:o,useCircularStructures:u});return l||(w.spec=p.normalize(w.spec)),w}}const Vt=e=>e.replace(/\W/gi,"_");function Gn(e,t,{v2OperationIdCompatibilityMode:r}={}){if(r){let n=`${t.toLowerCase()}_${e}`.replace(/[\s!@#$%^&*()_+=[{\]};:<>|./?,\\'""-]/g,"_");return n=n||`${e.substring(1)}_${t}`,n.replace(/((_){2,})/g,"_").replace(/^(_)*/g,"").replace(/([_])*$/g,"")}return`${t.toLowerCase()}${Vt(e)}`}function _e(e,t,r="",{v2OperationIdCompatibilityMode:n}={}){return!e||typeof e!="object"?null:(e.operationId||"").replace(/\s/g,"").length?Vt(e.operationId):Gn(t,r,{v2OperationIdCompatibilityMode:n})}function qe(e){const{spec:t}=e,{paths:r}=t,n={};if(!r||t.$$normalized)return e;for(const s in r){const o=r[s];if(o==null||!["object","function"].includes(typeof o))continue;const a=o.parameters;for(const i in o){const c=o[i];if(c==null||!["object","function"].includes(typeof c))continue;const l=_e(c,s,i);if(l){n[l]?n[l].push(c):n[l]=[c];const u=n[l];if(u.length>1)u.forEach((d,f)=>{d.__originalOperationId=d.__originalOperationId||d.operationId,d.operationId=`${l}${f+1}`});else if(typeof c.operationId<"u"){const d=u[0];d.__originalOperationId=d.__originalOperationId||c.operationId,d.operationId=l}}if(i!=="parameters"){const u=[],d={};for(const f in t)(f==="produces"||f==="consumes"||f==="security")&&(d[f]=t[f],u.push(d));if(a&&(d.parameters=a,u.push(d)),u.length){for(const f of u)for(const h in f)if(!c[h])c[h]=f[h];else if(h==="parameters")for(const p of f[h])c[h].some(g=>g.name&&g.name===p.name||g.$ref&&g.$ref===p.$ref||g.$$ref&&g.$$ref===p.$$ref||g===p)||c[h].push(p)}}}}return t.$$normalized=!0,e}const Qn={name:"generic",match(){return!0},normalize(e){const{spec:t}=qe({spec:e});return t},async resolve(e){return Ze(e)}};async function Yn(e){return Ze(e)}const Xn=e=>{try{const{swagger:t}=e;return t==="2.0"}catch{return!1}},Ht=e=>{try{const{openapi:t}=e;return typeof t=="string"&&/^3\.0\.([0123])(?:-rc[012])?$/.test(t)}catch{return!1}},et=e=>{try{const{openapi:t}=e;return typeof t=="string"&&/^3\.1\.(?:[1-9]\d*|0)$/.test(t)}catch{return!1}},Jt=e=>Ht(e)||et(e),Zn={name:"openapi-2",match(e){return Xn(e)},normalize(e){const{spec:t}=qe({spec:e});return t},async resolve(e){return Yn(e)}};async function _n(e){return Ze(e)}const qn={name:"openapi-3-0",match(e){return Ht(e)},normalize(e){const{spec:t}=qe({spec:e});return t},async resolve(e){return _n(e)}},{AbortController:es,AbortSignal:ts}=globalThis;typeof globalThis.AbortController>"u"&&(globalThis.AbortController=es);typeof globalThis.AbortSignal>"u"&&(globalThis.AbortSignal=ts);class rs extends Xt{constructor({swaggerHTTPClient:r=me,swaggerHTTPClientConfig:n={},...s}={}){super({...s,name:"http-swagger-client"});M(this,"swaggerHTTPClient",me);M(this,"swaggerHTTPClientConfig");this.swaggerHTTPClient=r,this.swaggerHTTPClientConfig=n}getHttpClient(){return this.swaggerHTTPClient}async read(r){const n=this.getHttpClient(),s=new AbortController,{signal:o}=s,a=setTimeout(()=>{s.abort()},this.timeout),i=this.getHttpClient().withCredentials||this.withCredentials?"include":"same-origin",c=this.redirects===0?"error":"follow",l=this.redirects>0?this.redirects:void 0;try{return(await n({url:r.uri,signal:o,userFetch:async(d,f)=>{let h=await fetch(d,f);try{h.headers.delete("Content-Type")}catch{h=new Response(h.body,{...h,headers:new Headers(h.headers)}),h.headers.delete("Content-Type")}return h},credentials:i,redirect:c,follow:l,...this.swaggerHTTPClientConfig})).text.arrayBuffer()}catch(u){throw new Zt(`Error downloading "${r.uri}"`,{cause:u})}finally{clearTimeout(a)}}}class ns extends ge{constructor(t={}){super({name:"json-swagger-client",mediaTypes:["application/json"],...t})}async canParse(t){const r=this.fileExtensions.length===0?!0:this.fileExtensions.includes(t.extension),n=this.mediaTypes.includes(t.mediaType);if(!r)return!1;if(n)return!0;if(!n)try{return JSON.parse(t.toString()),!0}catch{return!1}return!1}async parse(t){if(this.sourceMap)throw new V("json-swagger-client parser plugin doesn't support sourceMaps option");const r=new oe,n=t.toString();if(this.allowEmpty&&n.trim()==="")return r;try{const s=wt(JSON.parse(n));return s.classes.push("result"),r.push(s),r}catch(s){throw new V(`Error parsing "${t.uri}"`,{cause:s})}}}class ss extends ge{constructor(t={}){super({name:"yaml-1-2-swagger-client",mediaTypes:["text/yaml","application/yaml"],...t})}async canParse(t){const r=this.fileExtensions.length===0?!0:this.fileExtensions.includes(t.extension),n=this.mediaTypes.includes(t.mediaType);if(!r)return!1;if(n)return!0;if(!n)try{return X.load(t.toString(),{schema:ke}),!0}catch{return!1}return!1}async parse(t){if(this.sourceMap)throw new V("yaml-1-2-swagger-client parser plugin doesn't support sourceMaps option");const r=new oe,n=t.toString();try{const s=X.load(n,{schema:ke});if(this.allowEmpty&&typeof s>"u")return r;const o=wt(s);return o.classes.push("result"),r.push(o),r}catch(s){throw new V(`Error parsing "${t.uri}"`,{cause:s})}}}class os extends ge{constructor(r={}){super({name:"openapi-json-3-1-swagger-client",mediaTypes:new bt(...ne.filterByFormat("generic"),...ne.filterByFormat("json")),...r});M(this,"detectionRegExp",/"openapi"\s*:\s*"(?<version_json>3\.1\.(?:[1-9]\d*|0))"/)}async canParse(r){const n=this.fileExtensions.length===0?!0:this.fileExtensions.includes(r.extension),s=this.mediaTypes.includes(r.mediaType);if(!n)return!1;if(s)return!0;if(!s)try{const o=r.toString();return JSON.parse(o),this.detectionRegExp.test(o)}catch{return!1}return!1}async parse(r){if(this.sourceMap)throw new V("openapi-json-3-1-swagger-client parser plugin doesn't support sourceMaps option");const n=new oe,s=r.toString();if(this.allowEmpty&&s.trim()==="")return n;try{const o=JSON.parse(s),a=we.refract(o,this.refractorOpts);return a.classes.push("result"),n.push(a),n}catch(o){throw new V(`Error parsing "${r.uri}"`,{cause:o})}}}class is extends ge{constructor(r={}){super({name:"openapi-yaml-3-1-swagger-client",mediaTypes:new bt(...ne.filterByFormat("generic"),...ne.filterByFormat("yaml")),...r});M(this,"detectionRegExp",/(?<YAML>^(["']?)openapi\2\s*:\s*(["']?)(?<version_yaml>3\.1\.(?:[1-9]\d*|0))\3(?:\s+|$))|(?<JSON>"openapi"\s*:\s*"(?<version_json>3\.1\.(?:[1-9]\d*|0))")/m)}async canParse(r){const n=this.fileExtensions.length===0?!0:this.fileExtensions.includes(r.extension),s=this.mediaTypes.includes(r.mediaType);if(!n)return!1;if(s)return!0;if(!s)try{const o=r.toString();return X.load(o),this.detectionRegExp.test(o)}catch{return!1}return!1}async parse(r){if(this.sourceMap)throw new V("openapi-yaml-3-1-swagger-client parser plugin doesn't support sourceMaps option");const n=new oe,s=r.toString();try{const o=X.load(s,{schema:ke});if(this.allowEmpty&&typeof o>"u")return n;const a=we.refract(o,this.refractorOpts);return a.classes.push("result"),n.push(a),n}catch(o){throw new V(`Error parsing "${r.uri}"`,{cause:o})}}}const as=e=>e.slice(2),z=e=>{const t=as(e);return t.reduce((r,n,s)=>{if(Pt(n)){const o=String(A(n.key));r.push(o)}else if(vt(t[s-2])){const o=t[s-2].content.indexOf(n);r.push(o)}return r},[])};class cs{constructor({modelPropertyMacro:t,options:r}){M(this,"modelPropertyMacro");M(this,"options");M(this,"SchemaElement",{leave:(t,r,n,s,o)=>{typeof t.properties>"u"||se(t.properties)&&t.properties.forEach(a=>{if(se(a))try{const l=this.modelPropertyMacro(A(a));a.set("default",l)}catch(l){var i,c;const u=new Error(l,{cause:l});u.fullPath=[...z([...o,n,t]),"properties"],(i=this.options.dereference.dereferenceOpts)===null||i===void 0||(i=i.errors)===null||i===void 0||(c=i.push)===null||c===void 0||c.call(i,u)}})}});this.modelPropertyMacro=t,this.options=r}}class ls{constructor({options:t}){M(this,"options");M(this,"SchemaElement",{leave(t,r,n,s,o){if(typeof t.allOf>"u")return;if(!vt(t.allOf)){var a,i;const d=new TypeError("allOf must be an array");d.fullPath=[...z([...o,n,t]),"allOf"],(a=this.options.dereference.dereferenceOpts)===null||a===void 0||(a=a.errors)===null||a===void 0||(i=a.push)===null||i===void 0||i.call(a,d);return}if(t.allOf.isEmpty){t.remove("allOf");return}if(!t.allOf.content.every(Ie)){var l,u;const d=new TypeError("Elements in allOf must be objects");d.fullPath=[...z([...o,n,t]),"allOf"],(l=this.options.dereference.dereferenceOpts)===null||l===void 0||(l=l.errors)===null||l===void 0||(u=l.push)===null||u===void 0||u.call(l,d);return}for(;t.hasKey("allOf");){const{allOf:d}=t;t.remove("allOf");const f=_t.all([...d.content,t]);if(t.hasKey("$$ref")||f.remove("$$ref"),t.hasKey("example")){const h=f.getMember("example");h&&(h.value=t.get("example"))}if(t.hasKey("examples")){const h=f.getMember("examples");h&&(h.value=t.get("examples"))}t.content=f.content}}});this.options=t}}var J;class us{constructor({parameterMacro:t,options:r}){M(this,"parameterMacro");M(this,"options");rt(this,J,void 0);M(this,"OperationElement",{enter:t=>{xe(this,J,t)},leave:()=>{xe(this,J,void 0)}});M(this,"ParameterElement",{leave:(t,r,n,s,o)=>{const a=Oe(this,J)?A(Oe(this,J)):null,i=A(t);try{const u=this.parameterMacro(a,i);t.set("default",u)}catch(u){var c,l;const d=new Error(u,{cause:u});d.fullPath=z([...o,n]),(c=this.options.dereference.dereferenceOpts)===null||c===void 0||(c=c.errors)===null||c===void 0||(l=c.push)===null||l===void 0||l.call(c,d)}}});this.parameterMacro=t,this.options=r}}J=new WeakMap;const le=e=>{if(e.cause==null)return e;let{cause:t}=e;for(;t.cause!=null;)t=t.cause;return t};class fs extends He{}const{wrapError:Ee}=We,Me=Ot[Symbol.for("nodejs.util.promisify.custom")],U=new qt,H=(e,t,r,n)=>{Pt(n)?n.value=e:Array.isArray(n)&&(n[r]=e)};class re extends er{constructor({allowMetaPatches:r=!0,useCircularStructures:n=!1,basePath:s=null,...o}){super(o);M(this,"useCircularStructures");M(this,"allowMetaPatches");M(this,"basePath");this.allowMetaPatches=r,this.useCircularStructures=n,this.basePath=s}async ReferenceElement(r,n,s,o,a,i){try{if(this.indirections.includes(r))return!1;const[p,y]=this.toAncestorLineage([...a,s]),g=this.toBaseURI(A(r.$ref)),P=F(this.reference.uri)===g,w=!P;if(!this.options.resolve.internal&&P||!this.options.resolve.external&&w)return!1;const v=await this.toReference(A(r.$ref)),E=N(g,A(r.$ref));this.indirections.push(r);const I=K(E);let b=ee(I,v.value.result);if(b.id=U.identify(b),nt(b)){const C=A(r.meta.get("referenced-element")),O=`${C}-${A(U.identify(b))}`;this.refractCache.has(O)?b=this.refractCache.get(O):tr(b)?(b=rr.refract(b),b.setMetaProperty("referenced-element",C),this.refractCache.set(O,b)):(b=this.namespace.getElementClass(C).refract(b),this.refractCache.set(O,b))}if(r===b)throw new G("Recursive Reference Object detected");if(this.indirections.length>this.options.dereference.maxDepth)throw new Ae(`Maximum dereference depth of "${this.options.dereference.maxDepth}" has been exceeded in file "${this.reference.uri}"`);if(p.includes(b)){if(v.refSet.circular=!0,this.options.dereference.circular==="error")throw new G("Circular reference detected");if(this.options.dereference.circular==="replace"){var c,l;const C=new Se(b.id,{type:"reference",uri:v.uri,$ref:A(r.$ref),baseURI:E,referencingElement:r}),x=((c=(l=this.options.dereference.strategyOpts["openapi-3-1"])===null||l===void 0?void 0:l.circularReplacer)!==null&&c!==void 0?c:this.options.dereference.circularReplacer)(C);return i.replaceWith(C,H),s?!1:x}}const T=F(v.refSet.rootRef.uri)!==v.uri,j=["error","replace"].includes(this.options.dereference.circular);if((w||T||nr(b)||j)&&!p.includesCycle(b)){var u;y.add(r);const C=new re({reference:v,namespace:this.namespace,indirections:[...this.indirections],options:this.options,refractCache:this.refractCache,ancestors:p,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,basePath:(u=this.basePath)!==null&&u!==void 0?u:[...z([...a,s,r]),"$ref"]});b=await Me(b,C,{keyMap:te,nodeTypeGetter:Y}),y.delete(r)}this.indirections.pop();const m=sr(b);if(m.setMetaProperty("ref-fields",{$ref:A(r.$ref),description:A(r.description),summary:A(r.summary)}),m.setMetaProperty("ref-origin",v.uri),m.setMetaProperty("ref-referencing-element-id",D(U.identify(r))),se(b)&&(r.hasKey("description")&&"description"in b&&(m.remove("description"),m.set("description",r.get("description"))),r.hasKey("summary")&&"summary"in b&&(m.remove("summary"),m.set("summary",r.get("summary")))),this.allowMetaPatches&&se(m)&&!m.hasKey("$$ref")){const C=N(g,E);m.set("$$ref",C)}return i.replaceWith(m,H),s?!1:m}catch(p){var d,f,h;const y=le(p),g=Ee(y,{baseDoc:this.reference.uri,$ref:A(r.$ref),pointer:K(A(r.$ref)),fullPath:(d=this.basePath)!==null&&d!==void 0?d:[...z([...a,s,r]),"$ref"]});(f=this.options.dereference.dereferenceOpts)===null||f===void 0||(f=f.errors)===null||f===void 0||(h=f.push)===null||h===void 0||h.call(f,g);return}}async PathItemElement(r,n,s,o,a,i){try{if(!ae(r.$ref))return;if(this.indirections.includes(r)||or(["cycle"],r.$ref))return!1;const[p,y]=this.toAncestorLineage([...a,s]),g=this.toBaseURI(A(r.$ref)),P=F(this.reference.uri)===g,w=!P;if(!this.options.resolve.internal&&P||!this.options.resolve.external&&w)return;const v=await this.toReference(A(r.$ref)),E=N(g,A(r.$ref));this.indirections.push(r);const I=K(E);let b=ee(I,v.value.result);if(b.id=U.identify(b),nt(b)){const m=`path-item-${A(U.identify(b))}`;this.refractCache.has(m)?b=this.refractCache.get(m):(b=st.refract(b),this.refractCache.set(m,b))}if(r===b)throw new G("Recursive Path Item Object reference detected");if(this.indirections.length>this.options.dereference.maxDepth)throw new Ae(`Maximum dereference depth of "${this.options.dereference.maxDepth}" has been exceeded in file "${this.reference.uri}"`);if(p.includes(b)){if(v.refSet.circular=!0,this.options.dereference.circular==="error")throw new G("Circular reference detected");if(this.options.dereference.circular==="replace"){var c,l;const m=new Se(b.id,{type:"path-item",uri:v.uri,$ref:A(r.$ref),baseURI:E,referencingElement:r}),O=((c=(l=this.options.dereference.strategyOpts["openapi-3-1"])===null||l===void 0?void 0:l.circularReplacer)!==null&&c!==void 0?c:this.options.dereference.circularReplacer)(m);return i.replaceWith(m,H),s?!1:O}}const T=F(v.refSet.rootRef.uri)!==v.uri,j=["error","replace"].includes(this.options.dereference.circular);if((w||T||ot(b)&&ae(b.$ref)||j)&&!p.includesCycle(b)){var u;y.add(r);const m=new re({reference:v,namespace:this.namespace,indirections:[...this.indirections],options:this.options,ancestors:p,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,basePath:(u=this.basePath)!==null&&u!==void 0?u:[...z([...a,s,r]),"$ref"]});b=await Me(b,m,{keyMap:te,nodeTypeGetter:Y}),y.delete(r)}if(this.indirections.pop(),ot(b)){const m=new st([...b.content],D(b.meta),D(b.attributes));if(r.forEach((C,O,x)=>{m.remove(A(O)),m.content.push(x)}),m.remove("$ref"),m.setMetaProperty("ref-fields",{$ref:A(r.$ref)}),m.setMetaProperty("ref-origin",v.uri),m.setMetaProperty("ref-referencing-element-id",D(U.identify(r))),this.allowMetaPatches&&typeof m.get("$$ref")>"u"){const C=N(g,E);m.set("$$ref",C)}b=m}return i.replaceWith(b,H),s?void 0:b}catch(p){var d,f,h;const y=le(p),g=Ee(y,{baseDoc:this.reference.uri,$ref:A(r.$ref),pointer:K(A(r.$ref)),fullPath:(d=this.basePath)!==null&&d!==void 0?d:[...z([...a,s,r]),"$ref"]});(f=this.options.dereference.dereferenceOpts)===null||f===void 0||(f=f.errors)===null||f===void 0||(h=f.push)===null||h===void 0||h.call(f,g);return}}async SchemaElement(r,n,s,o,a,i){try{if(!ae(r.$ref))return;if(this.indirections.includes(r))return!1;const[p,y]=this.toAncestorLineage([...a,s]);let g=await this.toReference(ce(this.reference.uri)),{uri:P}=g;const w=ir(P,r),v=F(w),E=new ar({uri:v}),I=!this.options.resolve.resolvers.some(x=>x.canRead(E)),b=!I;let T=F(this.reference.uri)===w,j=!T;this.indirections.push(r);let m;try{if(I||b){P=this.toBaseURI(w);const x=w,S=L(g.value.result);if(m=cr(x,S),m=L(m),m.id=U.identify(m),!this.options.resolve.internal&&T||!this.options.resolve.external&&j)return}else{if(P=this.toBaseURI(w),T=F(this.reference.uri)===P,j=!T,!this.options.resolve.internal&&T||!this.options.resolve.external&&j)return;g=await this.toReference(ce(w));const x=K(w),S=L(g.value.result);m=ee(x,S),m=L(m),m.id=U.identify(m)}}catch(x){if(b&&x instanceof lr)if(ur(it(w))){if(T=F(this.reference.uri)===P,j=!T,!this.options.resolve.internal&&T||!this.options.resolve.external&&j)return;g=await this.toReference(ce(w));const S=it(w),k=L(g.value.result);m=fr(S,k),m=L(m),m.id=U.identify(m)}else{if(P=this.toBaseURI(A(w)),T=F(this.reference.uri)===P,j=!T,!this.options.resolve.internal&&T||!this.options.resolve.external&&j)return;g=await this.toReference(ce(w));const S=K(w),k=L(g.value.result);m=ee(S,k),m=L(m),m.id=U.identify(m)}else throw x}if(r===m)throw new G("Recursive Schema Object reference detected");if(this.indirections.length>this.options.dereference.maxDepth)throw new Ae(`Maximum dereference depth of "${this.options.dereference.maxDepth}" has been exceeded in file "${this.reference.uri}"`);if(p.includes(m)){if(g.refSet.circular=!0,this.options.dereference.circular==="error")throw new G("Circular reference detected");if(this.options.dereference.circular==="replace"){var c,l;const x=new Se(m.id,{type:"json-schema",uri:g.uri,$ref:A(r.$ref),baseURI:N(P,w),referencingElement:r}),k=((c=(l=this.options.dereference.strategyOpts["openapi-3-1"])===null||l===void 0?void 0:l.circularReplacer)!==null&&c!==void 0?c:this.options.dereference.circularReplacer)(x);return i.replaceWith(k,H),s?!1:k}}const C=F(g.refSet.rootRef.uri)!==g.uri,O=["error","replace"].includes(this.options.dereference.circular);if((j||C||Ie(m)&&ae(m.$ref)||O)&&!p.includesCycle(m)){var u;y.add(r);const x=new re({reference:g,namespace:this.namespace,indirections:[...this.indirections],options:this.options,useCircularStructures:this.useCircularStructures,allowMetaPatches:this.allowMetaPatches,ancestors:p,basePath:(u=this.basePath)!==null&&u!==void 0?u:[...z([...a,s,r]),"$ref"]});m=await Me(m,x,{keyMap:te,nodeTypeGetter:Y}),y.delete(r)}if(this.indirections.pop(),dr(m)){const x=D(m);return x.setMetaProperty("ref-fields",{$ref:A(r.$ref)}),x.setMetaProperty("ref-origin",g.uri),x.setMetaProperty("ref-referencing-element-id",D(U.identify(r))),i.replaceWith(x,H),s?!1:x}if(Ie(m)){const x=new pr([...m.content],D(m.meta),D(m.attributes));if(r.forEach((S,k,_)=>{x.remove(A(k)),x.content.push(_)}),x.remove("$ref"),x.setMetaProperty("ref-fields",{$ref:A(r.$ref)}),x.setMetaProperty("ref-origin",g.uri),x.setMetaProperty("ref-referencing-element-id",D(U.identify(r))),this.allowMetaPatches&&typeof x.get("$$ref")>"u"){const S=N(P,w);x.set("$$ref",S)}m=x}return i.replaceWith(m,H),s?void 0:m}catch(p){var d,f,h;const y=le(p),g=new fs(`Could not resolve reference: ${y.message}`,{baseDoc:this.reference.uri,$ref:A(r.$ref),fullPath:(d=this.basePath)!==null&&d!==void 0?d:[...z([...a,s,r]),"$ref"],cause:y});(f=this.options.dereference.dereferenceOpts)===null||f===void 0||(f=f.errors)===null||f===void 0||(h=f.push)===null||h===void 0||h.call(f,g);return}}async LinkElement(){}async ExampleElement(r,n,s,o,a,i){try{return await super.ExampleElement(r,n,s,o,a,i)}catch(d){var c,l,u;const f=le(d),h=Ee(f,{baseDoc:this.reference.uri,externalValue:A(r.externalValue),fullPath:(c=this.basePath)!==null&&c!==void 0?c:[...z([...a,s,r]),"externalValue"]});(l=this.options.dereference.dereferenceOpts)===null||l===void 0||(l=l.errors)===null||l===void 0||(u=l.push)===null||u===void 0||u.call(l,h);return}}}const ds=hr[Symbol.for("nodejs.util.promisify.custom")];class ps{constructor({parameterMacro:t,modelPropertyMacro:r,mode:n,options:s,...o}){const a=[];a.push(new re({...o,options:s})),typeof r=="function"&&a.push(new cs({modelPropertyMacro:r,options:s})),n!=="strict"&&a.push(new ls({options:s})),typeof t=="function"&&a.push(new us({parameterMacro:t,options:s}));const i=ds(a,{nodeTypeGetter:Y});Object.assign(this,i)}}const hs=Ot[Symbol.for("nodejs.util.promisify.custom")];class ys extends yr{constructor({allowMetaPatches:r=!1,parameterMacro:n=null,modelPropertyMacro:s=null,mode:o="non-strict",ancestors:a=[],...i}={}){super({...i});M(this,"allowMetaPatches");M(this,"parameterMacro");M(this,"modelPropertyMacro");M(this,"mode");M(this,"ancestors");this.name="openapi-3-1-swagger-client",this.allowMetaPatches=r,this.parameterMacro=n,this.modelPropertyMacro=s,this.mode=o,this.ancestors=[...a]}async dereference(r,n){var s;const o=mr(gr),a=(s=n.dereference.refSet)!==null&&s!==void 0?s:new $e,i=new $e;let c=a,l;a.has(r.uri)?l=a.find(f=>f.uri===r.uri):(l=new ue({uri:r.uri,value:r.parseResult}),a.add(l)),n.dereference.immutable&&(a.refs.map(f=>new ue({...f,value:D(f.value)})).forEach(f=>i.add(f)),l=i.find(f=>f.uri===r.uri),c=i);const u=new ps({reference:l,namespace:o,options:n,allowMetaPatches:this.allowMetaPatches,ancestors:this.ancestors,modelPropertyMacro:this.modelPropertyMacro,mode:this.mode,parameterMacro:this.parameterMacro}),d=await hs(c.rootRef.value,u,{keyMap:te,nodeTypeGetter:Y});return n.dereference.immutable&&i.refs.filter(f=>f.uri.startsWith("immutable://")).map(f=>new ue({...f,uri:f.uri.replace(/^immutable:\/\//,"")})).forEach(f=>a.add(f)),n.dereference.refSet===null&&a.clean(),i.clean(),d}}const ms=e=>{const t=A(e.meta.get("baseURI")),r=e.meta.get("referencingElement");return new $r({$ref:t},D(r.meta),D(r.attributes))},Pe=async e=>{const{spec:t,timeout:r,redirects:n,requestInterceptor:s,responseInterceptor:o,pathDiscriminator:a=[],allowMetaPatches:i=!1,useCircularStructures:c=!1,skipNormalization:l=!1,parameterMacro:u=null,modelPropertyMacro:d=null,mode:f="non-strict",strategies:h}=e;try{const{cache:p}=Pe,y=h.find(_=>_.match(t)),g=gt(at())?at():he,P=Xe(e),w=N(g,P);let v;p.has(t)?v=p.get(t):(v=we.refract(t),v.classes.push("result"),p.set(t,v));const E=new oe([v]),I=wr(a),b=I===""?"":`#${I}`,T=ee(I,v),j=new ue({uri:w,value:E}),m=new $e({refs:[j]});I!==""&&(m.rootRef=void 0);const C=[new Set([T])],O=[],x=await br(T,{resolve:{baseURI:`${w}${b}`,resolvers:[new rs({timeout:r||1e4,redirects:n||10})],resolverOpts:{swaggerHTTPClientConfig:{requestInterceptor:s,responseInterceptor:o}},strategies:[new Pr]},parse:{mediaType:ne.latest(),parsers:[new os({allowEmpty:!1,sourceMap:!1}),new is({allowEmpty:!1,sourceMap:!1}),new ns({allowEmpty:!1,sourceMap:!1}),new ss({allowEmpty:!1,sourceMap:!1}),new vr({allowEmpty:!1,sourceMap:!1})]},dereference:{maxDepth:100,strategies:[new ys({allowMetaPatches:i,useCircularStructures:c,parameterMacro:u,modelPropertyMacro:d,mode:f,ancestors:C})],refSet:m,dereferenceOpts:{errors:O},immutable:!1,circular:c?"ignore":"replace",circularReplacer:c?Or.dereference.circularReplacer:ms}}),S=xr(T,x,v),k=l?S:y.normalize(S);return{spec:A(k),errors:O}}catch(p){if(p instanceof Ar||p instanceof Sr)return{spec:null,errors:[]};throw p}};Pe.cache=new WeakMap;const yt=e=>{if(!se(e))return e;const t=[Rr({operationIdNormalizer:(n,s,o)=>_e({operationId:n},s,o,{v2OperationIdCompatibilityMode:!1})}),Tr(),Cr(),Er(),Mr()];return jr(e,t,{toolboxCreator:Ir,visitorOptions:{keyMap:te,nodeTypeGetter:Y}})},gs=e=>t=>{const r=we.refract(t);r.classes.push("result");const n=e(r),s=A(n);return Pe.cache.set(s,n),A(n)},uo={name:"openapi-3-1-apidom",match(e){return et(e)},normalize(e){if(!ct(e)&&Je(e)&&!e.$$normalized){const t=gs(yt)(e);return t.$$normalized=!0,t}return ct(e)?yt(e):e},async resolve(e){return Pe(e)}},ws=async e=>{const{spec:t,requestInterceptor:r,responseInterceptor:n}=e,s=Xe(e),o=Lt(e),a=t||await Nt(o,{requestInterceptor:r,responseInterceptor:n})(s),i={...e,spec:a};return e.strategies.find(l=>l.match(a)).resolve(i)},bs=e=>async t=>{const r={...e,...t};return ws(r)},Ps=bs({strategies:[qn,Zn,Qn]}),vs={body:Os,header:As,query:Rs,path:Ss,formData:xs};function Os({req:e,value:t}){t!==void 0&&(e.body=t)}function xs({req:e,value:t,parameter:r}){if(t===!1&&r.type==="boolean"&&(t="false"),t===0&&["number","integer"].indexOf(r.type)>-1&&(t="0"),t)e.form=e.form||{},e.form[r.name]={collectionFormat:r.collectionFormat,value:t};else if(r.allowEmptyValue&&t!==void 0){e.form=e.form||{};const n=r.name;e.form[n]=e.form[n]||{},e.form[n].allowEmptyValue=!0}}function As({req:e,parameter:t,value:r}){e.headers=e.headers||{},typeof r<"u"&&(e.headers[t.name]=r)}function Ss({req:e,value:t,parameter:r,baseURL:n}){if(t!==void 0){const s=e.url.replace(n,""),o=Ue(s,{[r.name]:t});e.url=n+o}}function Rs({req:e,value:t,parameter:r}){if(e.query=e.query||{},t===!1&&r.type==="boolean"&&(t="false"),t===0&&["number","integer"].indexOf(r.type)>-1&&(t="0"),t)e.query[r.name]={collectionFormat:r.collectionFormat,value:t};else if(r.allowEmptyValue&&t!==void 0){const n=r.name;e.query[n]=e.query[n]||{},e.query[n].allowEmptyValue=!0}}function ve(e,t){return t.includes("application/json")?typeof e=="string"?e:(Array.isArray(e)&&(e=e.map(r=>{try{return JSON.parse(r)}catch{return r}})),JSON.stringify(e)):String(e)}function Ts({req:e,value:t,parameter:r,baseURL:n}){const{name:s,style:o,explode:a,content:i}=r;if(t===void 0)return;const c=e.url.replace(n,"");let l;if(i){const u=Object.keys(i)[0];l=Ue(c,{[s]:t},{encoder:d=>Ft(ve(d,u))})}else l=Ue(c,{[s]:t},{encoder:u=>Qe({key:r.name,value:u,style:o||"simple",explode:a||!1,escape:"reserved"})});e.url=n+l}function Cs({req:e,value:t,parameter:r}){if(e.query=e.query||{},t!==void 0&&r.content){const n=Object.keys(r.content)[0],s=ve(t,n);if(s)e.query[r.name]=s;else if(r.allowEmptyValue){const o=r.name;e.query[o]=e.query[o]||{},e.query[o].allowEmptyValue=!0}return}if(t===!1&&(t="false"),t===0&&(t="0"),t){const{style:n,explode:s,allowReserved:o}=r;e.query[r.name]={value:t,serializationOption:{style:n,explode:s,allowReserved:o}}}else if(r.allowEmptyValue&&t!==void 0){const n=r.name;e.query[n]=e.query[n]||{},e.query[n].allowEmptyValue=!0}}const Es=["accept","authorization","content-type"];function Ms({req:e,parameter:t,value:r}){if(e.headers=e.headers||{},!(Es.indexOf(t.name.toLowerCase())>-1)){if(r!==void 0&&t.content){const n=Object.keys(t.content)[0];e.headers[t.name]=ve(r,n);return}r!==void 0&&!(Array.isArray(r)&&r.length===0)&&(e.headers[t.name]=Qe({key:t.name,value:r,style:t.style||"simple",explode:typeof t.explode>"u"?!1:t.explode,escape:!1}))}}function js({req:e,parameter:t,value:r}){e.headers=e.headers||{};const n=typeof r;if(r!==void 0&&t.content){const s=Object.keys(t.content)[0];e.headers.Cookie=`${t.name}=${ve(r,s)}`;return}if(r!==void 0&&!(Array.isArray(r)&&r.length===0)){const s=n==="object"&&!Array.isArray(r)&&t.explode?"":`${t.name}=`;e.headers.Cookie=s+Qe({key:t.name,value:r,escape:!1,style:t.style||"form",explode:typeof t.explode>"u"?!1:t.explode})}}const Is=Object.freeze(Object.defineProperty({__proto__:null,cookie:js,header:Ms,path:Ts,query:Cs},Symbol.toStringTag,{value:"Module"})),$s=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:window)(),{btoa:Wt}=$s;function ks(e,t){const{operation:r,requestBody:n,securities:s,spec:o,attachContentTypeForEmptyPayload:a}=e;let{requestContentType:i}=e;t=Us({request:t,securities:s,operation:r,spec:o});const c=r.requestBody||{},l=Object.keys(c.content||{}),u=i&&l.indexOf(i)>-1;if(n||a){if(i&&u)t.headers["Content-Type"]=i;else if(!i){const y=l[0];y&&(t.headers["Content-Type"]=y,i=y)}}else i&&u&&(t.headers["Content-Type"]=i);if(!e.responseContentType&&r.responses){const y=Object.entries(r.responses).filter(([g,P])=>{const w=parseInt(g,10);return w>=200&&w<300&&Je(P.content)}).reduce((g,[,P])=>g.concat(Object.keys(P.content)),[]);y.length>0&&(t.headers.accept=y.join(", "))}if(n)if(i){if(l.indexOf(i)>-1)if(i==="application/x-www-form-urlencoded"||i==="multipart/form-data")if(typeof n=="object"){var d,f;const y=(d=(f=c.content[i])===null||f===void 0?void 0:f.encoding)!==null&&d!==void 0?d:{};t.form={},Object.keys(n).forEach(g=>{let P;try{P=JSON.parse(n[g])}catch{P=n[g]}t.form[g]={value:P,encoding:y[g]||{}}})}else if(typeof n=="string"){var h,p;const y=(h=(p=c.content[i])===null||p===void 0?void 0:p.encoding)!==null&&h!==void 0?h:{};try{t.form={};const g=JSON.parse(n);Object.entries(g).forEach(([P,w])=>{t.form[P]={value:w,encoding:y[P]||{}}})}catch{t.form=n}}else t.form=n;else t.body=n}else t.body=n;return t}function Us({request:e,securities:t={},operation:r={},spec:n}){var s;const o={...e},{authorized:a={}}=t,i=r.security||n.security||[],c=a&&!!Object.keys(a).length,l=(n==null||(s=n.components)===null||s===void 0?void 0:s.securitySchemes)||{};return o.headers=o.headers||{},o.query=o.query||{},!Object.keys(t).length||!c||!i||Array.isArray(r.security)&&!r.security.length?e:(i.forEach(u=>{Object.keys(u).forEach(d=>{const f=a[d],h=l[d];if(!f)return;const p=f.value||f,{type:y}=h;if(f){if(y==="apiKey")h.in==="query"&&(o.query[h.name]=p),h.in==="header"&&(o.headers[h.name]=p),h.in==="cookie"&&(o.cookies[h.name]=p);else if(y==="http"){if(/^basic$/i.test(h.scheme)){const g=p.username||"",P=p.password||"",w=Wt(`${g}:${P}`);o.headers.Authorization=`Basic ${w}`}/^bearer$/i.test(h.scheme)&&(o.headers.Authorization=`Bearer ${p}`)}else if(y==="oauth2"||y==="openIdConnect"){const g=f.token||{},P=h["x-tokenName"]||"access_token",w=g[P];let v=g.token_type;(!v||v.toLowerCase()==="bearer")&&(v="Bearer"),o.headers.Authorization=`${v} ${w}`}}})}),o)}function Ds(e,t){const{spec:r,operation:n,securities:s,requestContentType:o,responseContentType:a,attachContentTypeForEmptyPayload:i}=e;if(t=Ns({request:t,securities:s,operation:n,spec:r}),t.body||t.form||i)o?t.headers["Content-Type"]=o:Array.isArray(n.consumes)?[t.headers["Content-Type"]]=n.consumes:Array.isArray(r.consumes)?[t.headers["Content-Type"]]=r.consumes:n.parameters&&n.parameters.filter(c=>c.type==="file").length?t.headers["Content-Type"]="multipart/form-data":n.parameters&&n.parameters.filter(c=>c.in==="formData").length&&(t.headers["Content-Type"]="application/x-www-form-urlencoded");else if(o){const c=n.parameters&&n.parameters.filter(u=>u.in==="body").length>0,l=n.parameters&&n.parameters.filter(u=>u.in==="formData").length>0;(c||l)&&(t.headers["Content-Type"]=o)}return!a&&Array.isArray(n.produces)&&n.produces.length>0&&(t.headers.accept=n.produces.join(", ")),t}function Ns({request:e,securities:t={},operation:r={},spec:n}){const s={...e},{authorized:o={},specSecurity:a=[]}=t,i=r.security||a,c=o&&!!Object.keys(o).length,l=n.securityDefinitions;return s.headers=s.headers||{},s.query=s.query||{},!Object.keys(t).length||!c||!i||Array.isArray(r.security)&&!r.security.length?e:(i.forEach(u=>{Object.keys(u).forEach(d=>{const f=o[d];if(!f)return;const{token:h}=f,p=f.value||f,y=l[d],{type:g}=y,P=y["x-tokenName"]||"access_token",w=h&&h[P];let v=h&&h.token_type;if(f)if(g==="apiKey"){const E=y.in==="query"?"query":"headers";s[E]=s[E]||{},s[E][y.name]=p}else if(g==="basic")if(p.header)s.headers.authorization=p.header;else{const E=p.username||"",I=p.password||"";p.base64=Wt(`${E}:${I}`),s.headers.authorization=`Basic ${p.base64}`}else g==="oauth2"&&w&&(v=!v||v.toLowerCase()==="bearer"?"Bearer":v,s.headers.authorization=`${v} ${w}`)})}),s)}function zs(e,t,r){if(!e||typeof e!="object"||!e.paths||typeof e.paths!="object")return null;const{paths:n}=e;for(const s in n)for(const o in n[s]){if(o.toUpperCase()==="PARAMETERS")continue;const a=n[s][o];if(!a||typeof a!="object")continue;const i={spec:e,pathName:s,method:o.toUpperCase(),operation:a},c=t(i);if(r&&c)return i}}function Fs(e,t){return zs(e,t,!0)||null}function Kt(e,t){return`${t.toLowerCase()}-${e}`}function Bs(e,t){return!e||!e.paths?null:Fs(e,({pathName:r,method:n,operation:s})=>{if(!s||typeof s!="object")return!1;const o=s.operationId,a=_e(s,r,n),i=Kt(r,n);return[a,i,o].some(c=>c&&c===t)})}const mt=e=>Array.isArray(e)?e:[],de=e=>{try{return new URL(e)}catch{const t=new URL(e,he),r=String(e).startsWith("/")?t.pathname:t.pathname.substring(1);return{hash:t.hash,host:"",hostname:"",href:"",origin:"",password:"",pathname:r,port:"",protocol:"",search:t.search,searchParams:t.searchParams}}};class Ls extends He{}const Vs=(e,t)=>t.filter(r=>r.name===e),Hs=e=>{const t={};e.forEach(n=>{t[n.in]||(t[n.in]={}),t[n.in][n.name]=n});const r=[];return Object.keys(t).forEach(n=>{Object.keys(t[n]).forEach(s=>{r.push(t[n][s])})}),r},Js={buildRequest:Ws};function fo({http:e,fetch:t,spec:r,operationId:n,pathName:s,method:o,parameters:a,securities:i,...c}){const l=e||t||me;s&&o&&!n&&(n=Kt(s,o));const u=Js.buildRequest({spec:r,operationId:n,parameters:a,securities:i,http:l,...c});return u.body&&(Je(u.body)||Array.isArray(u.body))&&(u.body=JSON.stringify(u.body)),l(u)}function Ws(e){const{spec:t,operationId:r,responseContentType:n,scheme:s,requestInterceptor:o,responseInterceptor:a,contextUrl:i,userFetch:c,server:l,serverVariables:u,http:d,signal:f,serverVariableEncoder:h}=e;let{parameters:p,parameterBuilders:y}=e;const g=Jt(t);y||(g?y=Is:y=vs);let w={url:"",credentials:d&&d.withCredentials?"include":"same-origin",headers:{},cookies:{}};f&&(w.signal=f),o&&(w.requestInterceptor=o),a&&(w.responseInterceptor=a),c&&(w.userFetch=c);const v=Bs(t,r);if(!v)throw new Ls(`Operation ${r} not found`);const{operation:E={},method:I,pathName:b}=v,T=Ks({spec:t,scheme:s,contextUrl:i,server:l,serverVariables:u,pathName:b,method:I,serverVariableEncoder:h});if(w.url+=T,!r)return delete w.cookies,w;w.url+=b,w.method=`${I}`.toUpperCase(),p=p||{};const j=t.paths[b]||{};n&&(w.headers.accept=n);const m=Hs([].concat(mt(E.parameters)).concat(mt(j.parameters)));m.forEach(O=>{const x=y[O.in];let S;if(O.in==="body"&&O.schema&&O.schema.properties&&(S=p),S=O&&O.name&&p[O.name],typeof S>"u"?S=O&&O.name&&p[`${O.in}.${O.name}`]:Vs(O.name,m).length>1&&console.warn(`Parameter '${O.name}' is ambiguous because the defined spec has more than one parameter with the name: '${O.name}' and the passed-in parameter values did not define an 'in' value.`),S!==null){if(typeof O.default<"u"&&typeof S>"u"&&(S=O.default),typeof S>"u"&&O.required&&!O.allowEmptyValue)throw new Error(`Required parameter ${O.name} is not provided`);if(g&&O.schema&&O.schema.type==="object"&&typeof S=="string")try{S=JSON.parse(S)}catch{throw new Error("Could not parse object parameter value string as JSON")}x&&x({req:w,parameter:O,value:S,operation:E,spec:t,baseURL:T})}});const C={...e,operation:E};if(g?w=ks(C,w):w=Ds(C,w),w.cookies&&Object.keys(w.cookies).length){const O=Object.keys(w.cookies).reduce((x,S)=>{const k=w.cookies[S],_=x?"&":"",Gt=kr.serialize(S,k);return x+_+Gt},"");w.headers.Cookie=O}return w.cookies&&delete w.cookies,Ye(w)}const Ve=e=>e?e.replace(/\W/g,""):null;function Ks(e){return Jt(e.spec)?Gs(e):Ys(e)}const je=e=>Array.isArray(e)&&e.length>0;function Gs({spec:e,pathName:t,method:r,server:n,contextUrl:s,serverVariables:o={},serverVariableEncoder:a}){var i,c;let l=[],u="",d;const f=e==null||(i=e.paths)===null||i===void 0||(i=i[t])===null||i===void 0||(i=i[(r||"").toLowerCase()])===null||i===void 0?void 0:i.servers,h=e==null||(c=e.paths)===null||c===void 0||(c=c[t])===null||c===void 0?void 0:c.servers,p=e==null?void 0:e.servers;if(l=je(f)?f:je(h)?h:je(p)?p:[un],n&&(d=l.find(y=>y.url===n),d&&(u=n)),u||([d]=l,u=d.url),Ur(u,{strict:!0})){const y=Object.entries({...d.variables}).reduce((g,[P,w])=>(g[P]=w.default,g),{});u=Dr(u,{...y,...o},{encoder:typeof a=="function"?a:Nr})}return Qs(u,s)}function Qs(e="",t=""){const r=de(e&&t?N(t,e):e),n=de(t),s=Ve(r.protocol)||Ve(n.protocol),o=r.host||n.host,a=r.pathname;let i;return s&&o?i=`${s}://${o+a}`:i=a,i[i.length-1]==="/"?i.slice(0,-1):i}function Ys({spec:e,scheme:t,contextUrl:r=""}){const n=de(r),s=Array.isArray(e.schemes)?e.schemes[0]:null,o=t||s||Ve(n.protocol)||"http",a=e.host||n.host||"",i=e.basePath||"";let c;return o&&a?c=`${o}://${a+i}`:c=i,c[c.length-1]==="/"?c.slice(0,-1):c}const Xs=async(e,t,r={})=>{const{returnEntireTree:n,baseDoc:s,requestInterceptor:o,responseInterceptor:a,parameterMacro:i,modelPropertyMacro:c,useCircularStructures:l,strategies:u}=r,d={spec:e,pathDiscriminator:t,baseDoc:s,requestInterceptor:o,responseInterceptor:a,parameterMacro:i,modelPropertyMacro:c,useCircularStructures:l,strategies:u},h=u.find(y=>y.match(e)).normalize(e),p=await Ps({spec:h,...d,allowMetaPatches:!0,skipNormalization:!et(e)});return!n&&Array.isArray(t)&&t.length&&(p.spec=t.reduce((y,g)=>y==null?void 0:y[g],p.spec)||null),p},po=e=>async(t,r,n={})=>{const s={...e,...n};return Xs(t,r,s)};export{qn as a,uo as b,Ws as c,lo as d,fo as e,po as f,Qn as g,me as h,_e as i,bs as m,Zn as o,Kn as s};
